<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mood Tracker</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Style/css -->
    <link rel="stylesheet" href="./styles/style.css">
  </head>

  <body>
    <!-- Modal -->
    <div id="feedbackModal" class="modal fade" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title text-center">Humeur enregistrÃ©e !</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
          </div>
          <div class="modal-body" id="modalBody">
            <!-- Contenu ajoutÃ© via JS -->
          </div>
          <div class="modal-footer">
            <button type="button" id="exportBtn" class="btn btn-success me-auto">ğŸ“„ Exporter en .txt</button>
            <button type="button" class="btn btn-secondary mt-3" data-bs-dismiss="modal">Fermer</button>
          </div>
        </div>
      </div>
    </div>

    <header>
      <h1>Trace ton humeur, dÃ©couvre-toi</h1>
      <i>â€¯Mon humeur en un coup dâ€™Å“ilâ€¯</i>
    </header>

    <div class="layout">
      <form id="moodForm" class="sidebar">
        <div class="mb-3">
          <label for="text" class="form-label">Comment te sens-tu ?</label>
          <textarea id="text" name="text" class="form-control" required placeholder="Ã‰cris ton humeur ici..."></textarea>
        </div>

        <div class="mb-3">
          <label for="rating" class="form-label">Note (1-5)</label>
          <input type="number" id="rating" name="rating" min="1" max="5" class="form-control" required />
        </div>

        <div class="mb-3 position-relative">
          <label for="address" class="form-label">Adresse</label>
          <input type="text" id="address" name="address" class="form-control" placeholder="Recherche d'adresse..." autocomplete="off" />
          <div id="autocomplete" class="autocomplete-suggestions"></div>
        </div>

        <div class="mb-3 position-relative">
          <label for="selfie" class="form-label">Ajoutez une photo</label>

          <!-- Choix entre selfie et upload -->
          <div class="d-flex justify-content-between mb-2">
            <button id="selfieBtn" type="button" class="btn btn-outline-success btn-sm active">ğŸ“· Prendre un selfie</button>
            <button id="uploadBtn" type="button" class="btn btn-outline-primary btn-sm">ğŸ“ Importer une photo</button>
          </div>

          <!-- Container pour le selfie -->
          <div id="cameraContainer" class="position-relative">
            <video id="camera" autoplay playsinline class="w-100 rounded"></video>

            <!-- Bouton capture -->
            <button id="snap" type="button" class="capture-btn">
              ğŸ“¸
            </button>
          </div>

          <!-- Container pour l'upload -->
          <div id="uploadContainer" class="position-relative d-none">
            <input type="file" id="fileInput" accept="image/*" class="form-control" />
          </div>

          <!-- AperÃ§u image -->
          <div id="photoContainer" class="position-relative d-none">
            <img id="selfiePreview" class="img-fluid rounded" alt="Photo">

            <!-- Bouton supprimer -->
            <button id="deletePhoto" type="button" class="delete-btn">âœ–ï¸</button>
          </div>

          <canvas id="canvas" style="display:none;"></canvas>
        </div>

        <button type="submit" class="btn btn-success">Enregistrer l'humeur</button>
      </form>

      <div class="map-container">
          <div id="map"></div>
      </div>
    </div>

  </body>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- Bootstrap min js -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Javascript pour le traitement des donnÃ©es -->
  <script type="module" src="./js/app.js"></script>

</html>
